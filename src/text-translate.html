<script>
xtag.register('text-translate', 
	{
	extends: 'div',
	accessors:
		{
		tags : { attribute: {}},
		params : { attribute: {}},
		dictionary : { attribute: { set : function(){}}},
		},
	lifecycle: 
		{
		created: function() 
			{
				this.tags = this.tags||"['span']";
				this.params = this.params||"['innerText']";
				this.update();
			},
		attributeChanged: function()
			{
				this.update();
			}
		},
	methods: 
		{
		update: function() 
			{
				var d = this.dictionary;
				if(d!=null)
				{
					if(this.tags == null || this.params == null)
						return ;
					if(d != this._d)
						this.map = eval(d); 
					this._d = d;
					var m = this.map;
					var tagarr = eval(this.tags); 
					for(var e = 0; e < tagarr.length;e++)
					{
					var c = this.querySelectorAll(tagarr[e])
					if(c.length!=null)
					{
					for(var i=0; i < c.length;i++)
						{
							var item = c[i]; 
							var parms = eval(this.params); 
							for(var a=0; a < parms.length;a++)
								{
								var attr = parms[a]; 
								if(item._txt==null) item._txt=[];
								
								if(item._txt[attr]==null) 
									item._txt[attr] = item[attr];
									
								if(item._txt[attr]!=null)
									{
									var x = m[item._txt[attr]];
									if(x==null)
										item[attr]=item._txt[attr];
									else
										item[attr]=x;
									}
								}
							}
						}
					}
				}
			}
		}
	});

		
	</script>
